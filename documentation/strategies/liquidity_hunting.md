# Стратегія: Полювання на ліквідність (Liquidity Hunting)

## Огляд

Це скальперська стратегія, що базується на аналізі потоку ордерів (Order Flow) та біржового стакану (DOM). Основна ідея полягає у виявленні великих лімітних ордерів ("стін"), які можуть виступати як короткострокові рівні підтримки або опору, та вході в позицію з розрахунком на відскок ціни від цих рівнів.

Стратегія використовує концепцію "фронтраннінгу", розміщуючи ордери безпосередньо перед великими гравцями, використовуючи їхню ліквідність як захист для стоп-лосу.

## Логіка та умови

Стратегія працює в безперервному циклі, аналізуючи ринкові дані в реальному часі.

### Умови для входу в довгу позицію (Long)

1.  **Сканування бідів (Bids):** Бот постійно аналізує сторону покупців у біржовому стакані.
2.  **Ідентифікація "стіни":** Бот виявляє лімітний ордер на купівлю, обсяг якого значно перевищує середній обсяг на сусідніх цінових рівнях (напр., в 10 разів).
3.  **Перевірка дистанції:** Бот перевіряє, чи поточна ринкова ціна знаходиться в межах заданої дистанції активації від виявленої "стіни".
4.  **Валідація (фільтр від спуфінгу):** Коли ціна наближається до "стіни", бот аналізує стрічку угод (Time & Sales). Вхід дозволяється тільки якщо стрічка показує, що об "стіну" починають виконуватися ринкові продажі, але сама "стіна" не зникає. Це підтверджує, що ліквідність реальна.
5.  **Розміщення ордерів:** Якщо всі умови виконані, бот розміщує лімітний ордер на купівлю трохи вище "стіни".

### Умови для входу в коротку позицію (Short)

Логіка дзеркальна до довгої позиції:

1.  **Сканування асків (Asks):** Бот аналізує сторону продавців.
2.  **Ідентифікація "стіни":** Виявляє аномально великий лімітний ордер на продаж.
3.  **Перевірка дистанції та валідація:** Аналогічно до лонг-позиції.
4.  **Розміщення ордерів:** Бот розміщує лімітний ордер на продаж трохи нижче "стіни".

## Управління ризиками: Stop Loss та Take Profit

### Stop Loss (SL)

Стоп-лос розміщується відразу за "стіною". Ідея в тому, що якщо ціна "проб'є" стіну, сценарій не виправдався, і потрібно закривати позицію з мінімальним збитком.

*   **Для Long:** `Ціна "стіни" - невеликий відступ`
*   **Для Short:** `Ціна "стіни" + невеликий відступ`

### Take Profit (TP)

Тейк-профіт розраховується на основі співвідношення ризику до прибутку (Risk/Reward Ratio).

1.  Розраховується ризик (відстань між ціною входу та стоп-лосом).
2.  Цей ризик множиться на заданий коефіцієнт (напр., 1.5).
3.  **Для Long:** `Ціна входу + (Ризик * R/R Ratio)`
4.  **Для Short:** `Ціна входу - (Ризик * R/R Ratio)`

## Параметри конфігурації

| Параметр | Опис |
|---|---|
| `wall_volume_multiplier` | У скільки разів обсяг "стіни" має перевищувати середній. |
| `activation_distance_ticks` | Максимальна відстань від ціни до "стіни" для активації сигналу. |
| `entry_offset_ticks` | Відступ від "стіни" для розміщення ордера на вхід. |
| `stop_loss_offset_ticks` | Відступ від "стіни" для розміщення стоп-лосу. |
| `risk_reward_ratio` | Співвідношення ризику до прибутку для розрахунку тейк-профіту. |
